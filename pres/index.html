<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introducción a los Modelos Basados en Agentes</title>
    <meta charset="utf-8" />
    <meta name="author" content="Roberto Cantillan Carrasco" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/animate.css/animate.xaringan.css" rel="stylesheet" />
    <link href="libs/tachyons/tachyons.min.css" rel="stylesheet" />
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/shareon/shareon.min.css" rel="stylesheet" />
    <script src="libs/shareon/shareon.min.js"></script>
    <link href="libs/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-shareagain/shareagain.js"></script>
    <link href="libs/xaringanExtra-extra-styles/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <meta name="description" content="Introducción a los modelos basados en agentes, Pontificia Universidad Católica de Chile, Enero 10, 2025"/>
    <meta name="twitter:title" content="Introducción a los modelos basados en agentes"/>
    <meta name="twitter:description" content="Introducción a los modelos basados en agentes, Pontificia Universidad Católica de Chile, Enero 10, 2025"/>
    <meta name="twitter:url" content=""/>
    <meta name="twitter:image" content=""/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:creator" content="ricantillan"/>
    <meta name="twitter:site" content="ricantillan"/>
    <meta property="og:title" content="Introducción a los modelos basados en agentes"/>
    <meta property="og:description" content="Introducción a los modelos basados en agentes, Pontificia Universidad Católica de Chile, Enero 10, 2025"/>
    <meta property="og:url" content=""/>
    <meta property="og:image" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:locale" content="en_US"/>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">












class: left title-slide
background-image: url('marcella-marcella-BXR9wvl29J8-unsplash.jpg')
background-size: cover
background-position: left


[ricantillan]: https://twitter.com/ricantillan
[github]: https://rcantillan.github.io



.side-text[
[&amp;commat;ricantillan][ricantillan] | [rcantillan.github.io][github]
]

.title-where[
### **Introducción a los &lt;br&gt; Modelos Basados en Agentes**
Pontificia Universidad Católica de Chile | CHISOCNET&lt;br&gt;
Enero 10, 2025
]

&lt;style type="text/css"&gt;
.title-slide h1 {
  font-size: 80px;
  font-family: Jost, sans;
  color: #6A5ACD;  /* Cambio del color del texto a morado */
   position: absolute;
  top: 150px; /* Ajusta este valor para mover verticalmente */
  left: 50px; /* Ajusta este valor para mover horizontalmente */
}

.side-text {
  color: #6A5ACD;  /* Cambio del color del texto lateral a morado */
  transform: rotate(90deg);
  position: absolute;
  font-size: 22px;
  top: 150px;
  right: -130px;
}

.side-text a {
  color: #6A5ACD;  /* Cambio del color de los enlaces a morado */
}

.title-where {
  font-family: Jost, sans;
  font-size: 25px;
  position: absolute;
  bottom: 10px;
  color: #6A5ACD;  /* Cambio del color del texto de ubicación a morado */
}

/******************
 * 
 * Coloured content boxes
 *
 ****************/


.content-box { 
    box-sizing: content-box;
    	background-color: #e2e2e2;
  /* Total width: 160px + (2 * 20px) + (2 * 8px) = 216px
     Total height: 80px + (2 * 20px) + (2 * 8px) = 136px
     Content box width: 160px
     Content box height: 80px */
}

.content-box-primary,
.content-box-secondary,
.content-box-blue,
.content-box-gray,
.content-box-grey,
.content-box-army,
.content-box-green,
.content-box-purple,
.content-box-red,
.content-box-yellow {
    /*border-radius: 15px; */
    margin: 0 0 25px;
    overflow: hidden;
    padding: 20px;
    width: 100%;
}


.content-box-primary {
	background-color: var(--primary);

}


.content-box-secondary {
	background-color: var(--secondary);

}

.content-box-blue {
    background-color: #F0F8FF;

}

.content-box-gray {
    background-color: #e2e2e2;
}

.content-box-grey {
	background-color: #F5F5F5;
}

.content-box-army {
	background-color: #737a36;
}

.content-box-green {
	background-color: #d9edc2;
}

.content-box-purple {
	background-color: #e2e2f9;
}

.content-box-red {
	background-color: #f9dbdb;
}

.content-box-yellow {
	background-color: #fef5c4;
}


.full-width {
    display: flex;
    width: 100%;
    flex: 1 1 auto;
}

&lt;/style&gt;


<div>
<style type="text/css">.xaringan-extra-logo {
width: 150px;
height: 150px;
z-index: 0;
background-image: url(logo-uc-05.svg);
background-size: contain;
background-repeat: no-repeat;
position: absolute;
top:1em;right:1em;
}
</style>
<script>(function () {
  let tries = 0
  function addLogo () {
    if (typeof slideshow === 'undefined') {
      tries += 1
      if (tries < 10) {
        setTimeout(addLogo, 100)
      }
    } else {
      document.querySelectorAll('.remark-slide-content:not(.title-slide):not(.hide_logo):not(.inverse)')
        .forEach(function (slide) {
          const logo = document.createElement('div')
          logo.classList = 'xaringan-extra-logo'
          logo.href = null
          slide.appendChild(logo)
        })
    }
  }
  document.addEventListener('DOMContentLoaded', addLogo)
})()</script>
</div>

---
class: left middle

### **Índice**

1. ¿Qué es un Modelo Basado en Agentes (ABM)?
2. ¿Por qué R y no NetLogo?
3. Principios de Modelado: KISS vs KIDS
4. Ejemplo: Modelo de Diseminación Cultural de Axelrod
5. Implementación Práctica en R
6. Conclusiones y Discusión

---

class: left middle

.full-width[.content-box-purple[
.bolder[]
"La verdad se encuentra directamente frente a nosotros en la realidad que nos rodea. Sin embargo, no podemos usarla tal como es. Una descripción ininterrumpida de la realidad sería simultáneamente la cosa más verdadera y más inútil del mundo, y ciertamente no sería ciencia." **Jakob von Uexküll**
]]


---

class: right middle

### **Predecesores y Padres Fundadores**

---
class: left middle

### **Herbert Simon y los Sistemas Complejos**

.w-60.fl[

- Herbert Simon estableció fundamentos cruciales para la sociología computacional basada en agentes al argumentar que no existe isomorfismo entre la complejidad macro y micro en sistemas sociales. 

- En muchos casos, como señala Squazzoni (2012), la complejidad que muestran los sistemas sociales a nivel macro no es más que el resultado de la interacción entre procesos micro simples. 

- Simon también enfatizó la importancia de estudiar "sistemas pobremente entendidos" mediante simulación computacional.
]

.w-40.fr[
### 

&lt;img src="herbert_simon.jpg" width="60%" style="display: block; margin: auto;" /&gt;

]

---

class: left middle

### **James S. Coleman y la Simulación Social**

.w-40.fl[

&lt;img src="james_coleman.jpg" width="100%" style="display: block; margin: auto;" /&gt;


]
.w-60.fr[

- Desde la Universidad Johns Hopkins, Coleman publicó contribuciones fundamentales para promover el uso de modelos de simulación en sociología.

- Su perspectiva se centró en compensar las limitaciones de los modelos analíticos deductivos e incluir datos tanto cuantitativos como cualitativos. 

- Coleman (1964) argumentó que la simulación podría ser vista como *"un puente entre los individuos, sobre quienes se realizan la mayoría de las observaciones del sociólogo, y los sistemas sociales, que son sus objetos de interés"* (p. 1055).
]

---
class: left middle

### **Raymond Boudon y el Enfoque Generativo**

.w-60.fl[
- Boudon realizó un trabajo pionero con su modelo de simulación para examinar las tasas de casos abandonados por fiscales estatales en Francia entre 1879 y 1931. 

- Su contribución fue fundamental al demostrar que los modelos de simulación podrían *"verificar un conjunto de hipótesis sobre los mecanismos responsables de las variaciones empíricamente observadas de estas tasas"* (Davidovitch &amp; Boudon 1964, p. 217). 

- Boudon enfatizó que la simulación podía ayudar a formalizar modelos capaces de generar patrones comparables con observaciones empíricas.
]

.w-40.fl[

&lt;img src="raymond-boudon.jpeg" width="90%" style="display: block; margin: auto;" /&gt;

]

---
class: left middle

### **Mark Granovetter y el Comportamiento Colectivo**

.w-40.fl[

&lt;img src="mark_granovetter.jpg" width="80%" style="display: block; margin: auto;" /&gt;

]

.w-60.fr[
- Granovetter contribuyó significativamente al entendimiento del comportamiento colectivo en sistemas sociales durante los años 70 y 80. 

- Al modelar disturbios en una población sujeta a influencia social, Granovetter demostró que "es arriesgado inferir disposiciones individuales de resultados agregados" (1978, p. 1425). 

- Sus modelos de umbral ayudaron a entender cómo paradojas aparentes del comportamiento colectivo podían explicarse mediante procesos de agregación.
]

---
class: left middle


### **Thomas Schelling y la Segregación**

.w-60.fl[
- El trabajo de Schelling, particularmente su modelo de segregación de 1971, demostró cómo patrones macroscópicos de segregación podían emerger de preferencias individuales moderadas. 

- Schelling enfatizó la importancia del "comportamiento contingente" *- comportamiento individual que depende de lo que otros hacen -* para entender cómo las acciones individuales causan patrones sociales imprevistos e inesperados.
]

.w-40.fr[
&lt;img src="thomas_schelling.jpg" width="100%" style="display: block; margin: auto;" /&gt;
]
---
class: right middle

### **Las Ideas Principales de la Sociología Computacional Basada en Agentes**

---

class: left middle

### ***Funcionalismo vs. ABM***

- El funcionalismo utiliza un enfoque "top-down" donde las estructuras sociales determinan el comportamiento individual, mientras los ABM adoptan un enfoque "bottom-up" donde los patrones sociales emergen de las interacciones individuales.
- El funcionalismo explica los fenómenos sociales en términos de necesidades funcionales del sistema, mientras los ABM se centran en mecanismos generativos y procesos de interacción.
- El funcionalismo ve a los individuos como portadores de roles y normas, mientras los ABM los considera agentes autónomos con capacidad de decisión.
- El funcionalismo enfatiza la estabilidad y el equilibrio, mientras los ABM pueden modelar cambios dinámicos y no-lineales.
- Metodológicamente, el funcionalismo depende de descripciones cualitativas o análisis de variables agregadas, mientras los ABM proporcionan una metodología formal para modelar interacciones y procesos emergentes.

---
class: left middle

### **La Primacía de los Modelos**

- Un modelo es una representación simplificada de un objetivo empírico. En la sociología computacional basada en agentes, los modelos son fundamentales porque:


.full-width[.content-box-purple[
.bolder[]
"Los modelos son ejercicios preliminares de teoría y mantienen un vínculo estrecho con la realidad empírica. Como lo demuestra la dificultad de comparar y probar casos empíricos narrativos y cuentas teóricas no formalizadas, el valor agregado del modelado es que puede garantizar la acumulación de hallazgos científicos a nivel intersubjetivo" (Squazzoni 2012).
]]

.footnote[
[1] Squazzoni, F. (2012). Agent‐Based Computational Sociology (1.ª ed.). Wiley. https://doi.org/10.1002/9781119954200
]

---
class: left middle

### **El Enfoque Generativo**

- El enfoque generativo es crucial para entender sistemas sociales complejos donde la deducción analítica top-down es una guía pobre. Como explica Epstein (2006):

.full-width[.content-box-purple[
.bolder[]
- "Dado algún explanandum macroscópico - una regularidad a ser explicada - el experimento canónico basado en agentes consiste en: Situar una población inicial de agentes autónomos heterogéneos en un ambiente espacial relevante; permitirles interactuar de acuerdo a reglas locales simples, y así generar la regularidad macroscópica desde abajo hacia arriba."
]]

.footnote[
[1] Epstein, J. M. (2006). Generative social science: Studies in agent-based computational modeling. Princeton university press.
]

---
class: left middle

### **El Vínculo Micro-Macro**

.w-60.fl[
La sociología computacional basada en agentes permite estudiar:
- Los mecanismos micro y procesos locales que son responsables de patrones macro
- El impacto de los patrones macro en el comportamiento micro a lo largo del tiempo
- La naturaleza auto-organizada de los patrones sociales
]

.w-40.fr[
&lt;img src="micro_macro.jpeg" width="100%" style="display: block; margin: auto;" /&gt;
]


---
class: left middle

## **¿Qué son los ABMs?**

---
class: left middle

## **Características Distintivas**

Los Modelos Basados en Agentes permiten:

1. Lograr correspondencia ontológica con el mundo real mediante agentes que imitan características cognitivas y sociales de actores reales
2. Incluir heterogeneidad de agentes en términos de reglas de comportamiento, información y posición
3. Estudiar interacción no lineal y sus consecuencias macro emergentes
4. Representar explícitamente el ambiente y sus restricciones
5. Visualizar dinámicas complejas de interacción

---
class: left middle

### **Comparación con Otras Técnicas**

Los ABMs difieren de técnicas como:

- Dinámica de sistemas: que ve el comportamiento del sistema como resultado de interacción entre estructuras sociales
- Microsimulación: que aunque basada en unidades micro, no puede examinar interacción social
- Autómatas celulares: que proporcionan una imagen demasiado simplificada del comportamiento social

---
class: left middle

### **Clasificación del Uso de ABMs en Investigación Social**

- **Sociedades Artificiales**: Las sociedades artificiales son sustitutos in-silico de sistemas sociales que permiten explorar aspectos de la evolución del comportamiento social que no pueden estudiarse empíricamente. El ejemplo paradigmático es Sugarscape (Epstein y Axtell, 1996), que integra aspectos demográficos, económicos y sociales.

- **Modelos Abstractos, de Rango Medio y Basados en Casos**: Los modelos abstractos buscan principios generales, mientras los modelos de rango medio conectan teoría con evidencia empírica para clases específicas de fenómenos. Los modelos basados en casos, como el modelo Anasazi, se enfocan en fenómenos empíricos específicos con alta precisión y detalle.

- **Simulaciones Aplicadas**: Las simulaciones aplicadas buscan replicar sistemas reales con suficiente detalle para resolver problemas prácticos y asistir en la toma de decisiones. Un ejemplo notable es el trabajo de Lansing y Kremer (1993) sobre sistemas de irrigación en Bali.


---

class: left middle

### **La Necesidad de Modelos**

&gt; "Si no hiciste crecer el fenómeno, no lo explicaste" - Joshua Epstein

- La realidad es demasiado compleja para estudiarla directamente
- Necesitamos simplificar para entender
- Los modelos son representaciones abstractas que capturan elementos esenciales
- "Debemos hacer violencia a la realidad" para entenderla científicamente

---

class: left middle

### **Descomposición: La Base del Modelado**

#### Preguntas Fundamentales

1. ¿Cuáles son las partes relevantes del sistema?
2. ¿Qué propiedades tienen estas partes?
3. ¿Cómo se relacionan entre sí?
4. ¿Cómo cambian estas relaciones en el tiempo?

---

class: left middle

### **Descomposición: Ejemplo del Elevador**

- **Comportamiento Individual**:
  - Decisiones de espera vs. uso de escaleras
  - Tiempo máximo dispuesto a esperar
  - Distancia a recorrer

- **Optimización Espacial**:
  - Distribución de personas dentro del elevador
  - Minimización de bloqueos
  
- **Patrones de Sistema**:
  - Flujos de entrada/salida
  - Picos de demanda

---

class: left middle

### **Fenómenos Emergentes**

.w-60.fl[
1. Los fenómenos emergentes son indeducibles.

2. Los fenómenos emergentes son inexplicables.

3. Los fenómenos emergentes son impredecibles.

4. Los fenómenos emergentes son irreducibles.

5. Los fenómenos emergentes no son ninguno de los anteriores.
]

.w-40.fr[
&lt;img src="9781400842872.png" width="60%" style="display: block; margin: auto;" /&gt;
]

.footnote[
[1] Holland, J. H. (1998). Emergence: From chaos to order. Reading, MA: Addison-Wesley.

[2] Epstein, J. M. (2006). Generative social science: Studies in agent-based computational modeling. Princeton university press.
]
---

class: left middle

### **Fenómenos Emergentes II**

- Patrones colectivos que emergen de reglas simples
- No son reducibles a comportamientos individuales

- Ejemplos:
  - Bandadas de pájaros
  - Segregación residencial
  - Normas sociales
  
---
class: left middle

### **¿Por qué son importantes los fenómenos emergentes?**

- La mayoría de fenómenos sociales son emergentes
- Las intenciones individuales pueden producir resultados inesperados
- Los modelos nos ayudan a:
  - Identificar mecanismos causales
  - Entender cómo surgen patrones colectivos
  - Predecir posibles resultados

---
class: left middle

### **Modelado en Ciencias Inexactas**
#### **Características especiales**

- No hay correspondencia directa entre mediciones y teoría
- Conceptos difíciles de medir:
  - Normas
  - Identidad
  - Cooperación
  - Confianza
- Múltiples niveles de organización interactuando

---
class: left middle

### **Modelado en Ciencias Inexactas II**

1. **Precisión**:
   - Fuerzan articulación exacta de supuestos
   - Evitan ambigüedad del lenguaje
   - Facilitan comunicación científica

2. **Tractabilidad**:
   - Permiten explorar consecuencias lógicas
   - Prueban diferentes escenarios
   - Generan predicciones verificables

3. **Insight**:
   - Desarrollan intuición sobre sistemas complejos
   - Revelan conexiones no obvias
   - Son "prótesis para la imaginación"

---

class: left middle

### **Tipos de Modelos**

#### Basados en Ecuaciones
- Matemáticamente tratables
- Buenos para dinámicas generales
- Ejemplo: Modelo SIR epidemiológico

#### Basados en Agentes
- Capturan heterogeneidad individual
- Permiten interacciones locales
- Ejemplo: Modelo de segregación de Schelling


---
class: left middle

### **¿Qué es un Modelo Basado en Agentes (ABM)?**

- **Definición**: Un ABM es un programa computacional que simula:
  - **Agentes**: Entidades individuales con estados y comportamientos.
  - **Reglas**: Interacciones entre agentes.
  - **Entorno**: El espacio donde los agentes interactúan.

- **Diferencias clave**:
  - **ABMs**: Representan individuos, sus comportamientos e interacciones.
  - **Modelos basados en ecuaciones**: Representan agregados y sus dinámicas.


---

class: middle left

&lt;iframe src="https://platform.destine.eu/" width="100%" height="400px" data-external="1"&gt;&lt;/iframe&gt;

[web](https://platform.destine.eu/)


---

class: middle left

&lt;iframe src="https://ncase.me/polygons/" width="100%" height="400px" data-external="1"&gt;&lt;/iframe&gt;

[web](https://ncase.me/polygons/)


---
class: middle right
background-image: url('d-koi-GQJY4UPR21U-unsplash.jpg')
background-size: cover

# **Muchas Gracias**
### **Esta presentación fue realizada con el paquete  [Xaringan](https://slides.yihui.org/xaringan), diseñado para entorno  [R](https://www.r-project.org/)** 


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": true,
"ratio": "16:9",
"slideNumberFormat": "%current%"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
